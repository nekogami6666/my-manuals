これまでのやり取りまとめ (Markdown形式)
1. C++での整数の切り捨て・切り上げ・四捨五入
(1) 整数同士の割り算は自動で切り捨て
C++で int / int の計算をすると、小数点以下は 自動で切り捨て られる。
例: 5 / 2 = 2 (余りがあっても切り捨て)
(2) 切り上げ (ceil)
正の整数に限れば、(x + y - 1) / y の形で計算すると切り上げができる。
例: 5 / 2 → (5 + 2 - 1) / 2 = 6 / 2 = 3
浮動小数型を使うなら
cpp
コピーする
編集する
double val = (double)x / (double)y;
int ans = (int)ceil(val);
(3) 四捨五入 (round)
(double)x / (double)y で 小数として計算 → + 0.5 → (int) キャスト
例: 5 / 2 → 2.5 + 0.5 = 3.0 → 3
cpp
コピーする
編集する
// 例
int x = 5, y = 2;
int ans_floor = x / y;                        // 切り捨て -> 2
int ans_ceil  = (x + y - 1) / y;              // 切り上げ -> 3
int ans_round = (int)((double)x / y + 0.5);   // 四捨五入 -> 3
2. (a, b) の平均を切り上げる問題
問題文の概要
正整数 a, b が与えられる。
その平均値 x = (a + b) / 2.0 の小数点以下を切り上げた整数を出力。
主な解法
解法1: ceil 関数を使う
cpp
コピーする
編集する
double x = (double)(a + b) / 2.0;
int ans = (int)ceil(x);
解法2: 整数演算で実現 (正の整数専用)
cpp
コピーする
編集する
// (a + b + 1) / 2 で平均値の切り上げを実現
int ans = (a + b + 1) / 2;
(a + b) が奇数なら「.5」が生じるので +1 分で繰り上がり、
(a + b) が偶数ならもともと整数なので問題なし。
3. 初学者向け解説: なぜうまくいくか？
(1) 切り上げ (x + y - 1) / y
整数割り算は余りを捨てる仕組みなので、少数部分がある場合に「プラス分」を先に加えて割り算すれば商が 1 大きくなる。
x, y が正の時にシンプルに動作。
(2) 四捨五入 (int)((double)x / (double)y + 0.5)
小数点以下が 0.5 未満なら商はそのまま、0.5 以上なら +1 してくれるイメージ。
(double) で計算してから 0.5 を足して (int) にすることで実現できる。
(3) (a + b + 1) / 2 で平均を切り上げる理由
(a + b) が偶数: 平均が整数 → +1 しても切り上げ後の商は変わらない。
(a + b) が奇数: 平均は .5 つき → +1 することで割り算後に 1 繰り上がる。
したがって正の整数に限ればシンプルに書ける。
4. コード例 (平均の切り上げ)
cpp
コピーする
編集する
#include <bits/stdc++.h>
using namespace std;

int main() {
    int a, b;
    cin >> a >> b;

    // 平均値の切り上げ (正の整数専用)
    int ans = (a + b + 1) / 2;
    cout << ans << endl;
    return 0;
}
(a + b) が奇数・偶数いずれの場合でも、正の整数範囲であればこれで問題なく動作する。
以上が、C++ の整数割り算における切り捨て・切り上げ・四捨五入、および簡単な問題例のまとめです。






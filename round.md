# これまでのやり取りまとめ

---

## 1. C++での切り捨て・切り上げ・四捨五入

### **整数同士の割り算と自動切り捨て**
- C++ で `int / int` を行うと、小数点以下が自動で **切り捨て** られる。

```cpp
int a = 5, b = 2;
int ans = a / b;  // 2 (小数点以下は切り捨て)
切り上げ (ceil)
正の整数どうしで、割り算の結果を 切り上げ たい場合は
ans
=
𝑥
+
(
𝑦
−
1
)
𝑦
ans= 
y
x+(y−1)
​
 
とする。
例：x = 5, y = 2 の場合
(
5
+
2
−
1
)
/
2
=
6
/
2
=
3
(5+2−1)/2=6/2=3
また、浮動小数点数を用いるなら

cpp
コピーする
編集する
int x = 5, y = 2;
double d = (double)x / (double)y;  // 2.5
int ans = (int)ceil(d);           // 3
四捨五入 (round)
まずは浮動小数で計算して、+ 0.5 したあと int に変換する。
cpp
コピーする
編集する
int x = 5, y = 2;
int ans = (int)((double)x / (double)y + 0.5); // (2.5 + 0.5) = 3.0 -> 3
C++11 以降なら round 関数 (#include <cmath>) を使ってもよい。
2. (a, b)の平均値を切り上げる問題
問題文
2 つの正整数
a, b が与えられる。
a, b の平均値を x とする。
x の小数点以下を切り上げて得られる整数を出力せよ。

例：
a = 5, b = 2 → 平均 3.5 → 切り上げ 4 を出力。
解説
方法 (1): ceil 関数
cpp
コピーする
編集する
double x = (double)(a + b) / 2.0;
int ans = (int)ceil(x);
方法 (2): 整数演算だけで実現
a + b が正のとき、(a + b + 1) / 2 で平均値の切り上げができる。
cpp
コピーする
編集する
int ans = (a + b + 1) / 2;
なぜなら a + b が偶数ならそのまま平均が整数、奇数なら平均が .5 で終わるので、+1 することで切り上げ分をカバーできる。
サンプルコード
cpp
コピーする
編集する
#include <bits/stdc++.h>
using namespace std;

int main() {
    int a, b;
    cin >> a >> b;

    // (a + b + 1) / 2 で、小数点以下切り上げ
    int ans = (a + b + 1) / 2;

    cout << ans << endl;
    return 0;
}
3. 初学者向けに「なぜうまくいくか」の丁寧な説明
切り上げ: (x + y - 1) / y
C++ の整数同士の割り算は余りを捨てる（切り捨て）。
割り算結果に少数部分があれば、「+ (y - 1)」で 1 の分を補う。
a, b が正の場合のみ使えるテクニック。
四捨五入: (int)((double)x / (double)y + 0.5)
double で小数点以下を計算し、0.5 を足してから int にキャストする。
小数部分が 0.5 以上なら、整数部分が 1 つ繰り上がる。
こちらも負の数には別途対応が必要。
(a + b + 1) / 2 で平均を切り上げる理由
(a + b) が奇数 → 平均は ○.5 → +1 して割れば 1 つ繰り上げ。
(a + b) が偶数 → 平均は整数 → +1 して割っても同じ整数になる。
正の整数であればシンプルに動作し、1 行で書けて便利。
コピーする
編集する
